{
  "openapi": "3.0.1",
  "info": {
    "title": "ShipYo API (Getting Started)",
    "description": "A simplified view of the ShipYo API for initial integration, covering authentication, plans, and subscriptions.",
    "version": "v1"
  },
  "paths": {
    "/api/Token/generate-from-apikey": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "1. Get Session Token",
        "description": "Authenticates using your global API Key (passed in the header) to generate a temporary JWT session token for subsequent requests.",
        "responses": {
          "200": {
            "description": "Success. Returns a JWT token.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Plan/getAll": {
      "get": {
        "tags": [
          "Plans"
        ],
        "summary": "2. Get Subscription Plans",
        "description": "Retrieves a list of all available subscription plans that you can display to your users.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanDtoPagedResultApiResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Subscription/subscribe": {
      "post": {
        "tags": [
          "Subscription"
        ],
        "summary": "3. Create a Subscription (Checkout)",
        "description": "Creates a new subscription for a user to a specific plan. This is the core of the checkout process.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscriptionDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionDtoApiResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PlanDto": {
        "required": [
          "name",
          "recurrenceType"
        ],
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string"
          },
          "recurringCostBeforeVAT": {
            "type": "number",
            "format": "double"
          },
          "vatPercentage": {
            "type": "number",
            "format": "double"
          },
          "recurrenceType": {
            "$ref": "#/components/schemas/RecurrenceType"
          },
          "isActive": {
            "type": "boolean"
          },
          "planFeatures": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PlanFeatureDto"
            },
            "nullable": true
          }
        }
      },
      "PlanFeatureDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "featureName": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "RecurrenceType": {
        "enum": [
          0,
          1,
          2
        ],
        "type": "integer",
        "format": "int32",
        "description": "0 = Monthly, 1 = Yearly, 2 = OneTime"
      },
      "SubscriptionDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32",
            "readOnly": true
          },
          "userID": {
            "type": "integer",
            "format": "int32"
          },
          "planID": {
            "type": "integer",
            "format": "int32"
          },
          "startDate": {
            "type": "string",
            "format": "date-time",
            "readOnly": true
          },
          "subscriptionStatus": {
            "$ref": "#/components/schemas/SubscriptionStatusEnum",
             "readOnly": true
          }
        }
      },
      "SubscriptionStatusEnum": {
        "enum": [
          0,
          1,
          2,
          3,
          4,
          5
        ],
        "type": "integer",
        "format": "int32",
        "description": "0=Pending, 1=Active, 2=Cancelled, 3=Expired, 4=PaymentFailed, 5=ActiveNoRenewal"
      },
      "PlanDtoPagedResult": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PlanDto"
            },
            "nullable": true
          },
          "totalCount": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "PlanDtoPagedResultApiResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "$ref": "#/components/schemas/PlanDtoPagedResult"
          }
        }
      },
      "SubscriptionDtoApiResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "$ref": "#/components/schemas/SubscriptionDto"
          }
        }
      },
      "StringApiResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "data": {
            "type": "string",
            "nullable": true
          },
          "message": {
            "type": "string",
            "nullable": true
          }
        }
      }
    }
  }
}